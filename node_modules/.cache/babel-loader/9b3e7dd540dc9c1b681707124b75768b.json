{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import{profileAPI,usersAPI}from\"../API/api\";var ADD_POST=\"network/profile/ADD_POST\";var SET_USER_PROFILE=\"network/profile/SET_USER_PROFILE\";var SET_USER_STATUS=\"network/profile/SET_USER_STATUS\";var DELETE_POST=\"network/profile/DELETE_POST\";var SAVE_PHOTO_SUCCESS=\"network/profile/SAVE_PHOTO_SUCCESS\";var FOLLOWING_STATUS=\"network/profile/FOLLOWING_STATUS\";var initialisation={posts:[{id:1,text:\"My first post!\",likeCount:12,avatar:\"https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/1200px-SpongeBob_SquarePants_character.svg.png\"},{id:2,text:\"My first post!\",likeCount:12,avatar:\"https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/1200px-SpongeBob_SquarePants_character.svg.png\"},{id:3,text:\"My first post!\",likeCount:12,avatar:\"https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/1200px-SpongeBob_SquarePants_character.svg.png\"}],profile:null,status:\"\",followed:null};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialisation;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:var newPost={id:4,text:action.newText,likeCount:0,avatar:\"https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/1200px-SpongeBob_SquarePants_character.svg.png\"};return _objectSpread({},state,{posts:[].concat(_toConsumableArray(state.posts),[newPost]),newText:\"\"});case SET_USER_PROFILE:{return _objectSpread({},state,{profile:action.profile});}case SET_USER_STATUS:{return _objectSpread({},state,{status:action.status});}case DELETE_POST:{return _objectSpread({},state,{posts:state.posts.filter(function(p){return p.id!=action.postId;})});}case SAVE_PHOTO_SUCCESS:{return _objectSpread({},state,{profile:_objectSpread({},state.profile,{photos:action.photos})});}case FOLLOWING_STATUS:{return _objectSpread({},state,{followed:action.status});}default:return state;}};export var addPostAC=function addPostAC(newText){return{type:ADD_POST,newText:newText};};export var deletePost=function deletePost(postId){return{type:DELETE_POST,postId:postId};};export var setProfile=function setProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setStatus=function setStatus(status){return{type:SET_USER_STATUS,status:status};};export var savePhotoSuccess=function savePhotoSuccess(photos){return{type:SAVE_PHOTO_SUCCESS,photos:photos};};export var followingStatus=function followingStatus(status){return{type:FOLLOWING_STATUS,status:status};};export var setUsersProfile=function setUsersProfile(userId){return(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return usersAPI.setUsers(userId);case 2:response=_context.sent;dispatch(setProfile(response.data));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}());};export var getStatus=function getStatus(userId){return(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(userId);case 2:response=_context2.sent;dispatch(setStatus(response.data));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}());};export var updateStatus=function updateStatus(status){return(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(setStatus(status));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}());};export var savePhoto=function savePhoto(file){return(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return profileAPI.savePhoto(file);case 2:response=_context4.sent;if(response.data.resultCode===0){dispatch(savePhotoSuccess(response.data.data.photos));}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x4){return _ref4.apply(this,arguments);};}());};export var userFollowingStatus=function userFollowingStatus(userId){return(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return usersAPI.getFollowingStatus(userId);case 2:response=_context5.sent;dispatch(followingStatus(response.data));case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x5){return _ref5.apply(this,arguments);};}());};export default profileReducer;","map":{"version":3,"sources":["D:/react/net/project1/src/Redux/profileReducer.js"],"names":["profileAPI","usersAPI","ADD_POST","SET_USER_PROFILE","SET_USER_STATUS","DELETE_POST","SAVE_PHOTO_SUCCESS","FOLLOWING_STATUS","initialisation","posts","id","text","likeCount","avatar","profile","status","followed","profileReducer","state","action","type","newPost","newText","filter","p","postId","photos","addPostAC","deletePost","setProfile","setStatus","savePhotoSuccess","followingStatus","setUsersProfile","userId","dispatch","setUsers","response","data","getStatus","updateStatus","resultCode","savePhoto","file","userFollowingStatus","getFollowingStatus"],"mappings":"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","sourcesContent":["import {profileAPI, usersAPI} from \"../API/api\";\r\n\r\n\r\nconst ADD_POST = \"network/profile/ADD_POST\";\r\nconst SET_USER_PROFILE = \"network/profile/SET_USER_PROFILE\";\r\nconst SET_USER_STATUS = \"network/profile/SET_USER_STATUS\";\r\nconst DELETE_POST = \"network/profile/DELETE_POST\";\r\nconst SAVE_PHOTO_SUCCESS = \"network/profile/SAVE_PHOTO_SUCCESS\";\r\nconst FOLLOWING_STATUS = \"network/profile/FOLLOWING_STATUS\";\r\n\r\n\r\nlet initialisation = {\r\n    posts: [\r\n        {\r\n            id: 1, text: \"My first post!\", likeCount: 12,\r\n            avatar: \"https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/1200px-SpongeBob_SquarePants_character.svg.png\",\r\n\r\n        },\r\n        {\r\n            id: 2, text: \"My first post!\", likeCount: 12,\r\n            avatar: \"https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/1200px-SpongeBob_SquarePants_character.svg.png\",\r\n\r\n        },\r\n        {\r\n            id: 3, text: \"My first post!\", likeCount: 12,\r\n            avatar: \"https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/1200px-SpongeBob_SquarePants_character.svg.png\",\r\n\r\n        },\r\n    ],\r\n    profile: null,\r\n    status: \"\",\r\n    followed: null,\r\n}\r\n\r\nconst profileReducer = (state = initialisation, action) => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost = {\r\n                id: 4,\r\n                text: action.newText,\r\n                likeCount: 0,\r\n                avatar: \"https://upload.wikimedia.org/wikipedia/en/thumb/3/3b/SpongeBob_SquarePants_character.svg/1200px-SpongeBob_SquarePants_character.svg.png\"\r\n            };\r\n            return {\r\n                ...state,\r\n                posts: [...state.posts, newPost],\r\n                newText: \"\"\r\n            }\r\n\r\n        case SET_USER_PROFILE: {\r\n            return {...state, profile: action.profile}\r\n        }\r\n        case SET_USER_STATUS: {\r\n            return {...state, status: action.status}\r\n        }\r\n        case DELETE_POST: {\r\n            return {...state, posts: state.posts.filter(p => p.id != action.postId)}\r\n        }\r\n        case SAVE_PHOTO_SUCCESS: {\r\n            return {...state, profile: {...state.profile, photos: action.photos}}\r\n        }\r\n        case FOLLOWING_STATUS: {\r\n            return {...state, followed: action.status}\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const addPostAC = (newText) => {\r\n    return ({type: ADD_POST, newText})\r\n};\r\n\r\nexport const deletePost = (postId) => ({type: DELETE_POST, postId})\r\n\r\nexport const setProfile = (profile) => ({type: SET_USER_PROFILE, profile});\r\n\r\nexport const setStatus = (status) => ({type: SET_USER_STATUS, status});\r\n\r\nexport const savePhotoSuccess = (photos) => ({type: SAVE_PHOTO_SUCCESS, photos});\r\n\r\nexport const followingStatus = (status) => ({type: FOLLOWING_STATUS, status});\r\n\r\nexport const setUsersProfile = (userId) => async (dispatch) => {\r\n    const response = await usersAPI.setUsers(userId)\r\n    dispatch(setProfile(response.data))\r\n}\r\n\r\nexport const getStatus = (userId) => async (dispatch) => {\r\n    const response = await profileAPI.getStatus(userId)\r\n    dispatch(setStatus(response.data))\r\n}\r\n\r\nexport const updateStatus = (status) => async (dispatch) => {\r\n    const response = await profileAPI.updateStatus(status)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setStatus(status))\r\n    }\r\n}\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    const response = await profileAPI.savePhoto(file)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos))\r\n    }\r\n}\r\n\r\nexport const userFollowingStatus = (userId) => async (dispatch) => {\r\n    const response = await usersAPI.getFollowingStatus(userId)\r\n    dispatch(followingStatus(response.data))\r\n}\r\n\r\n\r\nexport default profileReducer"]},"metadata":{},"sourceType":"module"}