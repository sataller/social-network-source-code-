{"ast":null,"code":"import _classCallCheck from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"D:\\\\react\\\\net\\\\project1\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React from\"react\";import Profile from\"./Profile\";import{getStatus,savePhoto,setUsersProfile,updateStatus,userFollowingStatus}from\"../../Redux/profileReducer\";import{connect}from\"react-redux\";import{withRouter}from\"react-router-dom\";import{getFollowingInProgress,getIsFetching}from\"../../Redux/userSelectors\";import{follow,toggleFollowingProgress,unfollow}from\"../../Redux/usersReducer\";import{startDialog}from\"../../Redux/dialogsReducer\";var ProfileContainer=/*#__PURE__*/function(_React$Component){_inherits(ProfileContainer,_React$Component);function ProfileContainer(){var _getPrototypeOf2;var _this;_classCallCheck(this,ProfileContainer);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ProfileContainer)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.refreshProfile=function(){var userId=_this.props.match.params.userId;if(!userId){userId=_this.props.authUserId;if(!userId){_this.props.history.push(\"/login\");}}_this.props.setUsersProfile(userId);_this.props.userFollowingStatus(userId);_this.props.getStatus(userId);};return _this;}_createClass(ProfileContainer,[{key:\"componentDidMount\",value:function componentDidMount(){this.refreshProfile();}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.props.match.params.userId!=prevProps.match.params.userId){this.refreshProfile();}if(this.props.followed!=prevProps.followed){this.refreshProfile();}}},{key:\"render\",value:function render(){return React.createElement(Profile,Object.assign({},this.props,{profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,isOwner:!this.props.match.params.userId,ownerId:this.props.match.params.userId,savePhoto:this.props.savePhoto,isFetching:this.props.isFetching,followingInProgress:this.props.followingInProgress,follow:this.props.follow,unfollow:this.props.unfollow,followingProgress:this.props.followingProgress,isAuth:this.props.isAuth,authUserId:this.props.authUserId,followed:this.props.followed,startDialog:this.props.startDialog}));}}]);return ProfileContainer;}(React.Component);// followed={props.followed}\n// let AuthRedirectComponent = withAuthRedirect(ProfileContainer)\nvar mapStateToProps=function mapStateToProps(state){return{profile:state.profilePage.profile,status:state.profilePage.status,authUserId:state.auth.id,isAuth:state.auth.isAuth,isFetching:getIsFetching(state),followingInProgress:getFollowingInProgress(state),followed:state.profilePage.followed};};var WithRouterProfileContainer=withRouter(ProfileContainer);export default connect(mapStateToProps,{setUsersProfile:setUsersProfile,getStatus:getStatus,updateStatus:updateStatus,follow:follow,unfollow:unfollow,toggleFollowingProgress:toggleFollowingProgress,savePhoto:savePhoto,userFollowingStatus:userFollowingStatus,startDialog:startDialog})(WithRouterProfileContainer);","map":{"version":3,"sources":["D:/react/net/project1/src/components/Profile/ProfileContainer.jsx"],"names":["React","Profile","getStatus","savePhoto","setUsersProfile","updateStatus","userFollowingStatus","connect","withRouter","getFollowingInProgress","getIsFetching","follow","toggleFollowingProgress","unfollow","startDialog","ProfileContainer","refreshProfile","userId","props","match","params","authUserId","history","push","prevProps","prevState","snapshot","followed","profile","status","isFetching","followingInProgress","followingProgress","isAuth","Component","mapStateToProps","state","profilePage","auth","id","WithRouterProfileContainer"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Profile from \"./Profile\";\r\nimport {getStatus, savePhoto, setUsersProfile, updateStatus, userFollowingStatus} from \"../../Redux/profileReducer\";\r\nimport {connect} from \"react-redux\";\r\nimport {withRouter} from \"react-router-dom\";\r\nimport {getFollowingInProgress, getIsFetching} from \"../../Redux/userSelectors\";\r\nimport {follow, toggleFollowingProgress, unfollow} from \"../../Redux/usersReducer\";\r\nimport {startDialog} from \"../../Redux/dialogsReducer\";\r\n\r\nclass ProfileContainer extends React.Component {\r\n\r\n    refreshProfile = () => {\r\n        let userId = this.props.match.params.userId\r\n        if (!userId) {\r\n            userId = this.props.authUserId;\r\n            if (!userId) {\r\n                this.props.history.push(\"/login\")\r\n            }\r\n        }\r\n        this.props.setUsersProfile(userId)\r\n        this.props.userFollowingStatus(userId)\r\n        this.props.getStatus(userId)\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.refreshProfile()\r\n\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.match.params.userId != prevProps.match.params.userId) {\r\n            this.refreshProfile()\r\n        }\r\n        if (this.props.followed != prevProps.followed) {\r\n            this.refreshProfile()\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n\r\n            <Profile {...this.props} profile={this.props.profile}\r\n                     status={this.props.status} updateStatus={this.props.updateStatus}\r\n                     isOwner={!this.props.match.params.userId}\r\n                     ownerId={this.props.match.params.userId}\r\n                     savePhoto={this.props.savePhoto} isFetching={this.props.isFetching}\r\n                     followingInProgress={this.props.followingInProgress}\r\n                     follow={this.props.follow} unfollow={this.props.unfollow}\r\n                     followingProgress={this.props.followingProgress} isAuth={this.props.isAuth}\r\n                     authUserId={this.props.authUserId}\r\n                     followed={this.props.followed} startDialog={this.props.startDialog}/>\r\n        )\r\n    }\r\n}\r\n\r\n// followed={props.followed}\r\n\r\n// let AuthRedirectComponent = withAuthRedirect(ProfileContainer)\r\n\r\nlet mapStateToProps = (state) => ({\r\n    profile: state.profilePage.profile,\r\n    status: state.profilePage.status,\r\n    authUserId: state.auth.id,\r\n    isAuth: state.auth.isAuth,\r\n    isFetching: getIsFetching(state),\r\n    followingInProgress: getFollowingInProgress(state),\r\n    followed: state.profilePage.followed,\r\n\r\n})\r\n\r\nlet WithRouterProfileContainer = withRouter(ProfileContainer)\r\n\r\nexport default connect(mapStateToProps, {\r\n    setUsersProfile, getStatus, updateStatus,\r\n    follow, unfollow, toggleFollowingProgress, savePhoto, userFollowingStatus, startDialog\r\n})(WithRouterProfileContainer)"]},"metadata":{},"sourceType":"module"}